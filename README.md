# ProCharity_back_2.0

<details>
  <summary>Оглавление</summary>
  <ol>
    <li>
      <a href="#описание">Описание</a>
    </li>
    <li>
      <a href="#зависимости">Установка зависимостей через poetry</a>
    </li>
  </ol>
</details>


### Описание

Создание чат-бота в Telegram для платформы интеллектуального волонтерства ProCharity (НКО Фонд Друзья).

Сайт [https://procharity.ru/](https://procharity.ru/)

Чат-бот @ProCharity_bot

Платформа представляет собой агрегатор волонтерских заданий от различных благотворительных проектов - любой желающий согласно своим желаниям и умениям может откликаться на конкретные предложения благотворительных проектов о волонтерской помощи, в свою  очередь благотворительный проект/фонд выбирает из всех откликов подходящих кандидатов. 

Чат-бот реализует функционал волонтерской платформы в приложении Telegram - с помощью JSON рассылает подписчикам новые появляющиеся задания от фондов.



### Установка зависимостей через poetry

- poetry install - установка зависимостей из poetry.lock
- poetry shell - активация виртуального окружения

### Работа с базой данных

1. Применить существующие миграции.

    ```shell
    alembic upgrade head
    ```

#### Создание миграций

1. Применить существующие миграции.

    ```shell
    alembic upgrade head
    ```

2. Создать новую миграцию.

    ```shell
    alembic revision --autogenerate -m "<Название миграции>"
    ```

    В название миграции указывается
    для какого поля или модели внесены изменения, например:

    * add_model_name
    * shift_add_field_title
    * shift_remove_field_title

3. Повторить пункт 1, для применения созданной миграции.

#### Откат миграций

1. Откатить последнюю миграцию.

    ```shell
    alembic downgrade -1
    ```


### Переменные окружения (.env)

```dotenv
# Переменные приложения

# Переменные базы данных
POSTGRES_DB=procharity_back_db_local  # Название базы данных
POSTGRES_USER=postgres  # Логин для подключения к базе данных
POSTGRES_PASSWORD=postgres  # Пароль для подключения к базе данных
DB_HOST=localhost  # Название сервиса (контейнера)
DB_PORT=6100  # Порт для подключения к базе данных
```